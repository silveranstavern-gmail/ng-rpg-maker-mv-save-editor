<div class="page">
  <app-file-loader (sampleDataLoaded)="onSampleDataLoaded()" />

  @if (save()) {
    <section class="panel game-panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Game Profile</p>
          <h2>Select ruleset</h2>
        </div>
      </div>
      <div class="game-switch">
        <label>
          <span>Active Game</span>
          <select [value]="selectedGame()" (change)="onGameChange($event)">
            @for (game of games; track game.id) {
              <option [value]="game.id" [selected]="game.id === selectedGame()">{{ game.label }}</option>
            }
          </select>
        </label>
      </div>
    </section>

    <app-economy-panel />
    <app-variable-panel />
    <app-actor-list />

    <app-inventory-table title="Items" [data]="items" [search]="itemSearch" kind="items" />
    <app-inventory-table title="Weapons" [data]="weapons" [search]="weaponSearch" kind="weapons" />
    <app-inventory-table title="Armors" [data]="armors" [search]="armorSearch" kind="armors" />

    @switch (selectedGame()) {
      @case ('wormskull') {
        <app-wormskull-mastery-panel />
      }
    }

    <app-raw-editor />
  } @else {
    <section class="placeholder">
      <p>Load a <code>.rpgsave</code> file to begin.</p>
    </section>
  }
</div>
